"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{33234:(t,e,n)=>{let i;n.d(e,{$t:()=>tf,EY:()=>r,FB:()=>tg,Fh:()=>m,Je:()=>ta,Nb:()=>j,OF:()=>O,Pe:()=>ti,QR:()=>tu,VR:()=>k,YH:()=>tt,ZX:()=>ts,iR:()=>x,kn:()=>tR,om:()=>tv,sU:()=>D,sj:()=>T,vB:()=>tx,vS:()=>p,zK:()=>d});var s=n(89572);class r{lineAt(t){if(t<0||t>this.length)throw RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=g(this,t,e);let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),o.from(i,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=g(this,t,e);let n=[];return this.decompose(t,e,n,0),o.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new a(this),s=new a(t);for(let t=e,r=e;;){if(i.next(t),s.next(t),t=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(r+=i.value.length,i.done||r>=n)return!0}}iter(t=1){return new a(this,t)}iterRange(t,e=this.length){return new c(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new f(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new h(t):o.from(h.split(t,[])):r.empty}}class h extends r{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,i){for(let s=0;;s++){let r=this.text[s],h=i+r.length;if((e?n:h)>=t)return new u(i,h,n,r);i=h+1,n++}}decompose(t,e,n,i){let s=t<=0&&e>=this.length?this:new h(l(this.text,[""],t,e),Math.min(e,this.length)-Math.max(0,t));if(1&i){let t=n.pop(),e=l(s.text,t.text.slice(),0,s.length);if(e.length<=32)n.push(new h(e,t.length+s.length));else{let t=e.length>>1;n.push(new h(e.slice(0,t)),new h(e.slice(t)))}}else n.push(s)}replace(t,e,n){if(!(n instanceof h))return super.replace(t,e,n);[t,e]=g(this,t,e);let i=l(this.text,l(n.text,l(this.text,[""],0,t)),e),s=this.length+n.length-(e-t);return i.length<=32?new h(i,s):o.from(h.split(i,[]),s)}sliceString(t,e=this.length,n="\n"){[t,e]=g(this,t,e);let i="";for(let s=0,r=0;s<=e&&r<this.text.length;r++){let h=this.text[r],o=s+h.length;s>t&&r&&(i+=n),t<o&&e>s&&(i+=h.slice(Math.max(0,t-s),e-s)),s=o+1}return i}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],i=-1;for(let s of t)n.push(s),i+=s.length+1,32==n.length&&(e.push(new h(n,i)),n=[],i=-1);return i>-1&&e.push(new h(n,i)),e}}class o extends r{constructor(t,e){for(let n of(super(),this.children=t,this.length=e,this.lines=0,t))this.lines+=n.lines}lineInner(t,e,n,i){for(let s=0;;s++){let r=this.children[s],h=i+r.length,o=n+r.lines-1;if((e?o:h)>=t)return r.lineInner(t,e,n,i);i=h+1,n=o+1}}decompose(t,e,n,i){for(let s=0,r=0;r<=e&&s<this.children.length;s++){let h=this.children[s],o=r+h.length;if(t<=o&&e>=r){let s=i&((r<=t?1:0)|(o>=e?2:0));r>=t&&o<=e&&!s?n.push(h):h.decompose(t-r,e-r,n,s)}r=o+1}}replace(t,e,n){if([t,e]=g(this,t,e),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let r=this.children[i],h=s+r.length;if(t>=s&&e<=h){let l=r.replace(t-s,e-s,n),a=this.lines-r.lines+l.lines;if(l.lines<a>>4&&l.lines>a>>6){let s=this.children.slice();return s[i]=l,new o(s,this.length-(e-t)+n.length)}return super.replace(s,h,l)}s=h+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){[t,e]=g(this,t,e);let i="";for(let s=0,r=0;s<this.children.length&&r<=e;s++){let h=this.children[s],o=r+h.length;r>t&&s&&(i+=n),t<o&&e>r&&(i+=h.sliceString(t-r,e-r,n)),r=o+1}return i}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof o))return 0;let n=0,[i,s,r,h]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=e,s+=e){if(i==r||s==h)return n;let o=this.children[i],l=t.children[s];if(o!=l)return n+o.scanIdentical(l,e);n+=o.length+1}}static from(t,e=t.reduce((t,e)=>t+e.length+1,-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new h(n,e)}let i=Math.max(32,n>>5),s=i<<1,r=i>>1,l=[],a=0,c=-1,f=[];function u(){0!=a&&(l.push(1==f.length?f[0]:o.from(f,c)),c=-1,a=f.length=0)}for(let e of t)!function t(e){let n;if(e.lines>s&&e instanceof o)for(let n of e.children)t(n);else e.lines>r&&(a>r||!a)?(u(),l.push(e)):e instanceof h&&a&&(n=f[f.length-1])instanceof h&&e.lines+n.lines<=32?(a+=e.lines,c+=e.length+1,f[f.length-1]=new h(n.text.concat(e.text),n.length+1+e.length)):(a+e.lines>i&&u(),a+=e.lines,c+=e.length+1,f.push(e))}(e);return u(),1==l.length?l[0]:new o(l,e)}}function l(t,e,n=0,i=1e9){for(let s=0,r=0,h=!0;r<t.length&&s<=i;r++){let o=t[r],l=s+o.length;l>=n&&(l>i&&(o=o.slice(0,i-s)),s<n&&(o=o.slice(n-s)),h?(e[e.length-1]+=o,h=!1):e.push(o)),s=l+1}return e}r.empty=new h([""],0);class a{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof h?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],r=s>>1,o=i instanceof h?i.text.length:i.children.length;if(r==(e>0?o:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&s)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(i instanceof h){let s=i.text[r+(e<0?-1:0)];if(this.offsets[n]+=e,s.length>Math.max(0,t))return this.value=0==t?s:e>0?s.slice(t):s.slice(0,s.length-t),this;t-=s.length}else{let s=i.children[r+(e<0?-1:0)];t>s.length?(t-=s.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(s),this.offsets.push(e>0?1:(s instanceof h?s.text.length:s.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class c{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new a(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:i}=this.cursor.next(t);return this.pos+=(i.length+t)*e,this.value=i.length<=n?i:e<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class f{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:i}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(r.prototype[Symbol.iterator]=function(){return this.iter()},a.prototype[Symbol.iterator]=c.prototype[Symbol.iterator]=f.prototype[Symbol.iterator]=function(){return this});class u{constructor(t,e,n,i){this.from=t,this.to=e,this.number=n,this.text=i}get length(){return this.to-this.from}}function g(t,e,n){return[e=Math.max(0,Math.min(t.length,e)),Math.max(e,Math.min(t.length,n))]}function d(t,e,n=!0,i=!0){return(0,s.z)(t,e,n,i)}function p(t,e){let n=t.charCodeAt(e);if(!(n>=55296&&n<56320)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return i>=56320&&i<57344?(n-55296<<10)+(i-56320)+65536:n}function m(t){return t<65536?1:2}let v=/\r\n?|\n/;var x=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(x||(x={}));class w{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,i=0;e<this.sections.length;){let s=this.sections[e++],r=this.sections[e++];r<0?(t(n,i,s),i+=s):i+=r,n+=s}}iterChangedRanges(t,e=!1){I(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];i<0?t.push(n,i):t.push(i,n)}return new w(t)}composeDesc(t){return this.empty?t:t.empty?this:E(this,t)}mapDesc(t,e=!1){return t.empty?this:b(this,t,e)}mapPos(t,e=-1,n=x.Simple){let i=0,s=0;for(let r=0;r<this.sections.length;){let h=this.sections[r++],o=this.sections[r++],l=i+h;if(o<0){if(l>t)return s+(t-i);s+=h}else{if(n!=x.Simple&&l>=t&&(n==x.TrackDel&&i<t&&l>t||n==x.TrackBefore&&i<t||n==x.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!h)return t==i||e<0?s:s+o;s+=o}i=l}if(t>i)throw RangeError(`Position ${t} is out of range for changeset of length ${i}`);return s}touchesRange(t,e=t){for(let n=0,i=0;n<this.sections.length&&i<=e;){let s=this.sections[n++],r=this.sections[n++],h=i+s;if(r>=0&&i<=e&&h>=t)return!(i<t)||!(h>e)||"cover";i=h}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(t=>"number"!=typeof t))throw RangeError("Invalid JSON representation of ChangeDesc");return new w(t)}static create(t){return new w(t)}}class k extends w{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw RangeError("Applying change set to a document with the wrong length");return I(this,(e,n,i,s,r)=>t=t.replace(i,i+(n-e),r),!1),t}mapDesc(t,e=!1){return b(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,s=0;i<e.length;i+=2){let h=e[i],o=e[i+1];if(o>=0){e[i]=o,e[i+1]=h;let l=i>>1;for(;n.length<l;)n.push(r.empty);n.push(h?t.slice(s,s+h):r.empty)}s+=h}return new k(e,n)}compose(t){return this.empty?t:t.empty?this:E(this,t,!0)}map(t,e=!1){return t.empty?this:b(this,t,e,!0)}iterChanges(t,e=!1){I(this,t,e)}get desc(){return w.create(this.sections)}filter(t){let e=[],n=[],i=[],s=new P(this);t:for(let r=0,h=0;;){let o=r==t.length?1e9:t[r++];for(;h<o||h==o&&0==s.len;){if(s.done)break t;let t=Math.min(s.len,o-h);y(i,t,-1);let r=-1==s.ins?-1:0==s.off?s.ins:0;y(e,t,r),r>0&&S(n,e,s.text),s.forward(t),h+=t}let l=t[r++];for(;h<l;){if(s.done)break t;let t=Math.min(s.len,l-h);y(e,t,-1),y(i,t,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(t),h+=t}}return{changes:new k(e,n),filtered:w.create(i)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):0==i?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let i=[],s=[],h=0,o=null;function l(t=!1){if(!t&&!i.length)return;h<e&&y(i,e-h,-1);let n=new k(i,s);o=o?o.compose(n.map(o)):n,i=[],s=[],h=0}return!function t(a){if(Array.isArray(a))for(let e of a)t(e);else if(a instanceof k){if(a.length!=e)throw RangeError(`Mismatched change set length (got ${a.length}, expected ${e})`);l(),o=o?o.compose(a.map(o)):a}else{let{from:t,to:o=t,insert:c}=a;if(t>o||t<0||o>e)throw RangeError(`Invalid change range ${t} to ${o} (in doc of length ${e})`);let f=c?"string"==typeof c?r.of(c.split(n||v)):c:r.empty,u=f.length;if(t==o&&0==u)return;t<h&&l(),t>h&&y(i,t-h,-1),y(i,o-t,u),S(s,i,f),h=o}}(t),l(!o),o}static empty(t){return new k(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let i=0;i<t.length;i++){let s=t[i];if("number"==typeof s)e.push(s,-1);else if(!Array.isArray(s)||"number"!=typeof s[0]||s.some((t,e)=>e&&"string"!=typeof t))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==s.length)e.push(s[0],0);else{for(;n.length<i;)n.push(r.empty);n[i]=r.of(s.slice(1)),e.push(s[0],n[i].length)}}return new k(e,n)}static createSet(t,e){return new k(t,e)}}function y(t,e,n,i=!1){if(0==e&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&0==e&&0==t[s]?t[s+1]+=n:i?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function S(t,e,n){if(0==n.length)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(r.empty);t.push(n)}}function I(t,e,n){let i=t.inserted;for(let s=0,h=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)s+=l,h+=l;else{let c=s,f=h,u=r.empty;for(;c+=l,f+=a,a&&i&&(u=u.append(i[o-2>>1])),!n&&o!=t.sections.length&&!(t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(s,c,h,f,u),s=c,h=f}}}function b(t,e,n,i=!1){let s=[],r=i?[]:null,h=new P(t),o=new P(e);for(let t=-1;;){if(h.done&&o.len||o.done&&h.len)throw Error("Mismatched change set lengths");if(-1==h.ins&&-1==o.ins){let t=Math.min(h.len,o.len);y(s,t,-1),h.forward(t),o.forward(t)}else if(o.ins>=0&&(h.ins<0||t==h.i||0==h.off&&(o.len<h.len||o.len==h.len&&!n))){let e=o.len;for(y(s,o.ins,-1);e;){let n=Math.min(h.len,e);h.ins>=0&&t<h.i&&h.len<=n&&(y(s,0,h.ins),r&&S(r,s,h.text),t=h.i),h.forward(n),e-=n}o.next()}else if(h.ins>=0){let e=0,n=h.len;for(;n;)if(-1==o.ins){let t=Math.min(n,o.len);e+=t,n-=t,o.forward(t)}else if(0==o.ins&&o.len<n)n-=o.len,o.next();else break;y(s,e,t<h.i?h.ins:0),r&&t<h.i&&S(r,s,h.text),t=h.i,h.forward(h.len-n)}else if(h.done&&o.done)return r?k.createSet(s,r):w.create(s);else throw Error("Mismatched change set lengths")}}function E(t,e,n=!1){let i=[],s=n?[]:null,r=new P(t),h=new P(e);for(let t=!1;;){if(r.done&&h.done)return s?k.createSet(i,s):w.create(i);if(0==r.ins)y(i,r.len,0,t),r.next();else if(0!=h.len||h.done){if(r.done||h.done)throw Error("Mismatched change set lengths");{let e=Math.min(r.len2,h.len),n=i.length;if(-1==r.ins){let n=-1==h.ins?-1:h.off?0:h.ins;y(i,e,n,t),s&&n&&S(s,i,h.text)}else -1==h.ins?(y(i,r.off?0:r.len,e,t),s&&S(s,i,r.textBit(e))):(y(i,r.off?0:r.len,h.off?0:h.ins,t),s&&!h.off&&S(s,i,h.text));t=(r.ins>e||h.ins>=0&&h.len>e)&&(t||i.length>n),r.forward2(e),h.forward(e)}}else y(i,0,h.ins,t),s&&S(s,i,h.text),h.next()}}class P{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?r.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?r.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class M{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let t=7&this.flags;return 7==t?null:t}get goalColumn(){let t=this.flags>>6;return 0xffffff==t?void 0:t}map(t,e=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new M(n,i,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return O.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return O.range(this.anchor,n)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid JSON representation for SelectionRange");return O.range(t.anchor,t.head)}static create(t,e,n){return new M(t,e,n)}}class O{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:O.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new O([this.main],0)}addRange(t,e=!0){return O.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,O.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new O(t.ranges.map(t=>M.fromJSON(t)),t.main)}static single(t,e=t){return new O([O.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let s=t[i];if(s.empty?s.from<=n:s.from<n)return O.normalized(t.slice(),e);n=s.to}return new O(t,e)}static cursor(t,e=0,n,i){return M.create(t,t,(0==e?0:e<0?8:16)|(null==n?7:Math.min(6,n))|(null!=i?i:0xffffff)<<6)}static range(t,e,n,i){let s=(null!=n?n:0xffffff)<<6|(null==i?7:Math.min(6,i));return e<t?M.create(e,t,48|s):M.create(t,e,(e>t?8:0)|s)}static normalized(t,e=0){let n=t[e];t.sort((t,e)=>t.from-e.from),e=t.indexOf(n);for(let n=1;n<t.length;n++){let i=t[n],s=t[n-1];if(i.empty?i.from<=s.to:i.from<s.to){let r=s.from,h=Math.max(i.to,s.to);n<=e&&e--,t.splice(--n,2,i.anchor>i.head?O.range(h,r):O.range(r,h))}}return new O(t,e)}}function R(t,e){for(let n of t.ranges)if(n.to>e)throw RangeError("Selection points outside of document")}let A=0;class T{constructor(t,e,n,i,s){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.id=A++,this.default=t([]),this.extensions="function"==typeof s?s(this):s}get reader(){return this}static define(t={}){return new T(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:C),!!t.static,t.enables)}of(t){return new N([],this,0,t)}compute(t,e){if(this.isStatic)throw Error("Can't compute a static facet");return new N(t,this,1,e)}computeN(t,e){if(this.isStatic)throw Error("Can't compute a static facet");return new N(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],n=>e(n.field(t)))}}function C(t,e){return t==e||t.length==e.length&&t.every((t,n)=>t===e[n])}class N{constructor(t,e,n,i){this.dependencies=t,this.facet=e,this.type=n,this.value=i,this.id=A++}dynamicSlot(t){var e;let n=this.value,i=this.facet.compareInput,s=this.id,r=t[s]>>1,h=2==this.type,o=!1,l=!1,a=[];for(let n of this.dependencies)"doc"==n?o=!0:"selection"==n?l=!0:((null!==(e=t[n.id])&&void 0!==e?e:1)&1)==0&&a.push(t[n.id]);return{create:t=>(t.values[r]=n(t),1),update(t,e){if(o&&e.docChanged||l&&(e.docChanged||e.selection)||B(t,a)){let e=n(t);if(h?!F(e,t.values[r],i):!i(e,t.values[r]))return t.values[r]=e,1}return 0},reconfigure:(t,e)=>{let o,l=e.config.address[s];if(null!=l){let s=U(e,l);if(this.dependencies.every(n=>n instanceof T?e.facet(n)===t.facet(n):!(n instanceof D)||e.field(n,!1)==t.field(n,!1))||(h?F(o=n(t),s,i):i(o=n(t),s)))return t.values[r]=s,0}else o=n(t);return t.values[r]=o,1}}}}function F(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function B(t,e){let n=!1;for(let i of e)1&W(t,i)&&(n=!0);return n}let J=T.define({static:!0});class D{constructor(t,e,n,i,s){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(t){let e=new D(A++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(J).find(t=>t.field==this);return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let i=t.values[e],s=this.updateF(i,n);return this.compareF(i,s)?0:(t.values[e]=s,1)},reconfigure:(t,n)=>{let i=t.facet(J),s=n.facet(J),r;return(r=i.find(t=>t.field==this))&&r!=s.find(t=>t.field==this)?(t.values[e]=r.create(t),1):null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}}init(t){return[this,J.of({field:this,create:t})]}get extension(){return this}}let L={lowest:4,low:3,default:2,high:1,highest:0};function $(t){return e=>new V(e,t)}let j={highest:$(L.highest),high:$(L.high),default:$(L.default),low:$(L.low),lowest:$(L.lowest)};class V{constructor(t,e){this.inner=t,this.prec=e}}class z{of(t){return new _(this,t)}reconfigure(t){return z.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class _{constructor(t,e){this.compartment=t,this.inner=e}}class q{constructor(t,e,n,i,s,r){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let i,s,r=[],h=Object.create(null),o=new Map;for(let n of(i=[[],[],[],[],[]],s=new Map,!function t(n,r){let h=s.get(n);if(null!=h){if(h<=r)return;let t=i[h].indexOf(n);t>-1&&i[h].splice(t,1),n instanceof _&&o.delete(n.compartment)}if(s.set(n,r),Array.isArray(n))for(let e of n)t(e,r);else if(n instanceof _){if(o.has(n.compartment))throw RangeError("Duplicate use of compartment in extensions");let i=e.get(n.compartment)||n.inner;o.set(n.compartment,i),t(i,r)}else if(n instanceof V)t(n.inner,n.prec);else if(n instanceof D)i[r].push(n),n.provides&&t(n.provides,r);else if(n instanceof N)i[r].push(n),n.facet.extensions&&t(n.facet.extensions,L.default);else{let e=n.extension;if(!e)throw Error(`Unrecognized extension value in extension set (${n}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e,r)}}(t,L.default),i.reduce((t,e)=>t.concat(e))))n instanceof D?r.push(n):(h[n.facet.id]||(h[n.facet.id]=[])).push(n);let l=Object.create(null),a=[],c=[];for(let t of r)l[t.id]=c.length<<1,c.push(e=>t.slot(e));let f=null==n?void 0:n.config.facets;for(let t in h){let e=h[t],i=e[0].facet,s=f&&f[t]||[];if(e.every(t=>0==t.type)){if(l[i.id]=a.length<<1|1,C(s,e))a.push(n.facet(i));else{let t=i.combine(e.map(t=>t.value));a.push(n&&i.compare(t,n.facet(i))?n.facet(i):t)}}else{for(let t of e)0==t.type?(l[t.id]=a.length<<1|1,a.push(t.value)):(l[t.id]=c.length<<1,c.push(e=>t.dynamicSlot(e)));l[i.id]=c.length<<1,c.push(t=>(function(t,e,n){let i=n.map(e=>t[e.id]),s=n.map(t=>t.type),r=i.filter(t=>!(1&t)),h=t[e.id]>>1;function o(t){let n=[];for(let e=0;e<i.length;e++){let r=U(t,i[e]);if(2==s[e])for(let t of r)n.push(t);else n.push(r)}return e.combine(n)}return{create(t){for(let e of i)W(t,e);return t.values[h]=o(t),1},update(t,n){if(!B(t,r))return 0;let i=o(t);return e.compare(i,t.values[h])?0:(t.values[h]=i,1)},reconfigure(t,s){let r=B(t,i),l=s.config.facets[e.id],a=s.facet(e);if(l&&!r&&C(n,l))return t.values[h]=a,0;let c=o(t);return e.compare(c,a)?(t.values[h]=a,0):(t.values[h]=c,1)}}})(t,i,e))}}return new q(t,o,c.map(t=>t(l)),l,a,h)}}function W(t,e){if(1&e)return 2;let n=e>>1,i=t.status[n];if(4==i)throw Error("Cyclic dependency between fields and/or facets");if(2&i)return i;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function U(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}let G=T.define(),H=T.define({combine:t=>t.some(t=>t),static:!0}),Y=T.define({combine:t=>t.length?t[0]:void 0,static:!0}),K=T.define(),Q=T.define(),X=T.define(),Z=T.define({combine:t=>!!t.length&&t[0]});class tt{constructor(t,e){this.type=t,this.value=e}static define(){return new te}}class te{of(t){return new tt(this,t)}}class tn{constructor(t){this.map=t}of(t){return new ti(this,t)}}class ti{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new ti(this.type,e)}is(t){return this.type==t}static define(t={}){return new tn(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let i of t){let t=i.map(e);t&&n.push(t)}return n}}ti.reconfigure=ti.define(),ti.appendConfig=ti.define();class ts{constructor(t,e,n,i,s,r){this.startState=t,this.changes=e,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=r,this._doc=null,this._state=null,n&&R(n,e.newLength),s.some(t=>t.type==ts.time)||(this.annotations=s.concat(ts.time.of(Date.now())))}static create(t,e,n,i,s,r){return new ts(t,e,n,i,s,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(ts.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function tr(t,e,n){var i;let s,r,h;return n?(s=e.changes,r=k.empty(e.changes.length),h=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),h=t.changes.compose(s)),{changes:h,selection:e.selection?e.selection.map(r):null===(i=t.selection)||void 0===i?void 0:i.map(s),effects:ti.mapEffects(t.effects,s).concat(ti.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function th(t,e,n){let i=e.selection,s=tl(e.annotations);return e.userEvent&&(s=s.concat(ts.userEvent.of(e.userEvent))),{changes:e.changes instanceof k?e.changes:k.of(e.changes||[],n,t.facet(Y)),selection:i&&(i instanceof O?i:O.single(i.anchor,i.head)),effects:tl(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}ts.time=tt.define(),ts.userEvent=tt.define(),ts.addToHistory=tt.define(),ts.remote=tt.define();let to=[];function tl(t){return null==t?to:Array.isArray(t)?t:[t]}var ta=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ta||(ta={}));let tc=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{i=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}class tf{constructor(t,e,n,i,s,r){this.config=t,this.doc=e,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=s,r&&(r._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)W(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null==n){if(e)throw RangeError("Field is not present in this state");return}return W(this,n),U(this,n)}update(...t){return function t(e,n,i){let s=th(e,n.length?n[0]:{},e.doc.length);n.length&&!1===n[0].filter&&(i=!1);for(let t=1;t<n.length;t++){!1===n[t].filter&&(i=!1);let r=!!n[t].sequential;s=tr(s,th(e,n[t],r?s.changes.newLength:e.doc.length),r)}let r=ts.create(e,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return function(t){let e=t.startState,n=e.facet(X),i=t;for(let s=n.length-1;s>=0;s--){let r=n[s](t);r&&Object.keys(r).length&&(i=tr(i,th(e,r,t.changes.newLength),!0))}return i==t?t:ts.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}(i?function(e){let n=e.startState,i=!0;for(let t of n.facet(K)){let n=t(e);if(!1===n){i=!1;break}Array.isArray(n)&&(i=!0===i?n:function(t,e){let n=[];for(let i=0,s=0;;){let r,h;if(i<t.length&&(s==e.length||e[s]>=t[i]))r=t[i++],h=t[i++];else{if(!(s<e.length))return n;r=e[s++],h=e[s++]}!n.length||n[n.length-1]<r?n.push(r,h):n[n.length-1]<h&&(n[n.length-1]=h)}}(i,n))}if(!0!==i){let t,s;if(!1===i)s=e.changes.invertedDesc,t=k.empty(n.doc.length);else{let n=e.changes.filter(i);t=n.changes,s=n.filtered.mapDesc(n.changes).invertedDesc}e=ts.create(n,t,e.selection&&e.selection.map(s),ti.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}let s=n.facet(Q);for(let i=s.length-1;i>=0;i--){let r=s[i](e);e=r instanceof ts?r:Array.isArray(r)&&1==r.length&&r[0]instanceof ts?r[0]:t(n,tl(r),!1)}return e}(r):r)}(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:i,compartments:s}=n;for(let e of t.effects)e.is(z.reconfigure)?(n&&(s=new Map,n.compartments.forEach((t,e)=>s.set(e,t)),n=null),s.set(e.value.compartment,e.value.extension)):e.is(ti.reconfigure)?(n=null,i=e.value):e.is(ti.appendConfig)&&(n=null,i=tl(i).concat(e.value));e=n?t.startState.values.slice():new tf(n=q.resolve(i,s,this),this.doc,this.selection,n.dynamicSlots.map(()=>null),(t,e)=>e.reconfigure(t,this),null).values;let r=t.startState.facet(H)?t.newSelection:t.newSelection.asSingle();new tf(n,t.newDoc,r,e,(e,n)=>n.update(e,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:O.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),s=[n.range],r=tl(n.effects);for(let n=1;n<e.ranges.length;n++){let h=t(e.ranges[n]),o=this.changes(h.changes),l=o.map(i);for(let t=0;t<n;t++)s[t]=s[t].map(l);let a=i.mapDesc(o,!0);s.push(h.range.map(a)),i=i.compose(l),r=ti.mapEffects(r,l).concat(ti.mapEffects(tl(h.effects),a))}return{changes:i,selection:O.create(s,e.mainIndex),effects:r}}changes(t=[]){return t instanceof k?t:k.of(t,this.doc.length,this.facet(tf.lineSeparator))}toText(t){return r.of(t.split(this.facet(tf.lineSeparator)||v))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(W(this,e),U(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof D&&null!=this.config.address[i.id]&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let s=n[e],r=t[e];i.push(s.init(t=>s.spec.fromJSON(r,t)))}}return tf.create({doc:t.doc,selection:O.fromJSON(t.selection),extensions:e.extensions?i.concat([e.extensions]):i})}static create(t={}){let e=q.resolve(t.extensions||[],new Map),n=t.doc instanceof r?t.doc:r.of((t.doc||"").split(e.staticFacet(tf.lineSeparator)||v)),i=t.selection?t.selection instanceof O?t.selection:O.single(t.selection.anchor,t.selection.head):O.single(0);return R(i,n.length),e.staticFacet(H)||(i=i.asSingle()),new tf(e,n,i,e.dynamicSlots.map(()=>null),(t,e)=>e.create(t),null)}get tabSize(){return this.facet(tf.tabSize)}get lineBreak(){return this.facet(tf.lineSeparator)||"\n"}get readOnly(){return this.facet(Z)}phrase(t,...e){for(let e of this.facet(tf.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(t,n)=>{if("$"==n)return"$";let i=+(n||1);return!i||i>e.length?t:e[i-1]})),t}languageDataAt(t,e,n=-1){let i=[];for(let s of this.facet(G))for(let r of s(this,e,n))Object.prototype.hasOwnProperty.call(r,t)&&i.push(r[t]);return i}charCategorizer(t){var e;return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return ta.Space;if(function(t){if(i)return i.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||tc.test(n)))return!0}return!1}(t))return ta.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return ta.Word;return ta.Other}}wordAt(t){let{text:e,from:n,length:i}=this.doc.lineAt(t),s=this.charCategorizer(t),r=t-n,h=t-n;for(;r>0;){let t=d(e,r,!1);if(s(e.slice(t,r))!=ta.Word)break;r=t}for(;h<i;){let t=d(e,h);if(s(e.slice(h,t))!=ta.Word)break;h=t}return r==h?null:O.range(r+n,h+n)}}function tu(t,e,n={}){let i={};for(let e of t)for(let t of Object.keys(e)){let s=e[t],r=i[t];if(void 0===r)i[t]=s;else if(r===s||void 0===s);else if(Object.hasOwnProperty.call(n,t))i[t]=n[t](r,s);else throw Error("Config merge conflict for field "+t)}for(let t in e)void 0===i[t]&&(i[t]=e[t]);return i}tf.allowMultipleSelections=H,tf.tabSize=T.define({combine:t=>t.length?t[0]:4}),tf.lineSeparator=Y,tf.readOnly=Z,tf.phrases=T.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(n=>t[n]==e[n])}}),tf.languageData=G,tf.changeFilter=K,tf.transactionFilter=Q,tf.transactionExtender=X,z.reconfigure=ti.define();class tg{eq(t){return this==t}range(t,e=t){return td.create(t,e,this)}}tg.prototype.startSide=tg.prototype.endSide=0,tg.prototype.point=!1,tg.prototype.mapMode=x.TrackDel;class td{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new td(t,e,n)}}function tp(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class tm{constructor(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,i=0){let s=n?this.to:this.from;for(let r=i,h=s.length;;){if(r==h)return r;let i=r+h>>1,o=s[i]-t||(n?this.value[i].endSide:this.value[i].startSide)-e;if(i==r)return o>=0?r:h;o>=0?h=i:r=i+1}}between(t,e,n,i){for(let s=this.findIndex(e,-1e9,!0),r=this.findIndex(n,1e9,!1,s);s<r;s++)if(!1===i(this.from[s]+t,this.to[s]+t,this.value[s]))return!1}map(t,e){let n=[],i=[],s=[],r=-1,h=-1;for(let o=0;o<this.value.length;o++){let l=this.value[o],a=this.from[o]+t,c=this.to[o]+t,f,u;if(a==c){let t=e.mapPos(a,l.startSide,l.mapMode);if(null==t||(f=u=t,l.startSide!=l.endSide&&(u=e.mapPos(a,l.endSide))<f))continue}else if((f=e.mapPos(a,l.startSide))>(u=e.mapPos(c,l.endSide))||f==u&&l.startSide>0&&l.endSide<=0)continue;0>(u-f||l.endSide-l.startSide)||(r<0&&(r=f),l.point&&(h=Math.max(h,u-f)),n.push(l),i.push(f-r),s.push(u-r))}return{mapped:n.length?new tm(i,s,n,h):null,pos:r}}}class tv{constructor(t,e,n,i){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=i}static create(t,e,n,i){return new tv(t,e,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=t,r=t.filter;if(0==e.length&&!r)return this;if(n&&(e=e.slice().sort(tp)),this.isEmpty)return e.length?tv.of(e):this;let h=new tk(this,null,-1).goto(0),o=0,l=[],a=new tx;for(;h.value||o<e.length;)if(o<e.length&&(h.from-e[o].from||h.startSide-e[o].value.startSide)>=0){let t=e[o++];a.addInner(t.from,t.to,t.value)||l.push(t)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(o==e.length||this.chunkEnd(h.chunkIndex)<e[o].from)&&(!r||i>this.chunkEnd(h.chunkIndex)||s<this.chunkPos[h.chunkIndex])&&a.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!r||i>h.to||s<h.from||r(h.from,h.to,h.value))&&!a.addInner(h.from,h.to,h.value)&&l.push(td.create(h.from,h.to,h.value)),h.next());return a.finishInner(this.nextLayer.isEmpty&&!l.length?tv.empty:this.nextLayer.update({add:l,filter:r,filterFrom:i,filterTo:s}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],h=this.chunk[s],o=t.touchesRange(r,r+h.length);if(!1===o)i=Math.max(i,h.maxPoint),e.push(h),n.push(t.mapPos(r));else if(!0===o){let{mapped:s,pos:o}=h.map(r,t);s&&(i=Math.max(i,s.maxPoint),e.push(s),n.push(o))}}let s=this.nextLayer.map(t);return 0==e.length?s:new tv(n,e,s||tv.empty,i)}between(t,e,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],r=this.chunk[i];if(e>=s&&t<=s+r.length&&!1===r.between(s,t-s,e-s,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return ty.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return ty.from(t).goto(e)}static compare(t,e,n,i,s=-1){let r=t.filter(t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=s),h=e.filter(t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=s),o=tw(r,h,n),l=new tI(r,o,s),a=new tI(h,o,s);n.iterGaps((t,e,n)=>tb(l,t,a,e,n,i)),n.empty&&0==n.length&&tb(l,0,a,0,0,i)}static eq(t,e,n=0,i){null==i&&(i=0x3b9ac9ff);let s=t.filter(t=>!t.isEmpty&&0>e.indexOf(t)),r=e.filter(e=>!e.isEmpty&&0>t.indexOf(e));if(s.length!=r.length)return!1;if(!s.length)return!0;let h=tw(s,r),o=new tI(s,h,0).goto(n),l=new tI(r,h,0).goto(n);for(;;){if(o.to!=l.to||!tE(o.active,l.active)||o.point&&(!l.point||!o.point.eq(l.point)))return!1;if(o.to>i)return!0;o.next(),l.next()}}static spans(t,e,n,i,s=-1){let r=new tI(t,null,s).goto(e),h=e,o=r.openStart;for(;;){let t=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),s=r.pointFrom<e?n.length+1:r.point.startSide<0?n.length:Math.min(n.length,o);i.point(h,t,r.point,n,s,r.pointRank),o=Math.min(r.openEnd(t),n.length)}else t>h&&(i.span(h,t,r.active,o),o=r.openEnd(t));if(r.to>n)return o+(r.point&&r.to>n?1:0);h=r.to,r.next()}}static of(t,e=!1){let n=new tx;for(let i of t instanceof td?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(tp(e,i)>0)return t.slice().sort(tp);e=i}return t}(t):t)n.add(i.from,i.to,i.value);return n.finish()}static join(t){if(!t.length)return tv.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let i=t[n];i!=tv.empty;i=i.nextLayer)e=new tv(i.chunkPos,i.chunk,e,Math.max(i.maxPoint,e.maxPoint));return e}}tv.empty=new tv([],[],null,-1),tv.empty.nextLayer=tv.empty;class tx{finishChunk(t){this.chunks.push(new tm(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new tx)).add(t,e,n)}addInner(t,e,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&0>(t-this.lastFrom||n.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if(0>(t-this.lastTo||e.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(tv.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=tv.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function tw(t,e,n){let i=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&i.set(e.chunk[t],e.chunkPos[t]);let s=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let r=i.get(t.chunk[e]);null==r||(n?n.mapPos(r):r)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(r,r+t.chunk[e].length))||s.add(t.chunk[e])}return s}class tk{constructor(t,e,n,i=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(t,e){0>(this.to-t||this.endSide-e)&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class ty{constructor(t){this.heap=t}static from(t,e=null,n=-1){let i=[];for(let s=0;s<t.length;s++)for(let r=t[s];!r.isEmpty;r=r.nextLayer)r.maxPoint>=n&&i.push(new tk(r,e,n,s));return 1==i.length?i[0]:new ty(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)tS(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)tS(this.heap,t);0>(this.to-t||this.value.endSide-e)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),tS(this.heap,0)}}}function tS(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let s=t[i];if(i+1<t.length&&s.compare(t[i+1])>=0&&(s=t[i+1],i++),0>n.compare(s))break;t[i]=n,t[e]=s,e=i}}class tI{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ty.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e);)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){tP(this.active,t),tP(this.activeTo,t),tP(this.activeRank,t),this.minActive=tO(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:i,rank:s}=this.cursor;for(;e<this.activeRank.length&&(s-this.activeRank[e]||i-this.activeTo[e])>0;)e++;tM(this.active,e,n),tM(this.activeTo,e,i),tM(this.activeRank,e,s),t&&tM(t,e,this.cursor.from),this.minActive=tO(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&0>(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&tP(n,i)}else if(this.cursor.value){if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else this.addActive(n),this.cursor.next()}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function tb(t,e,n,i,s,r){t.goto(e),n.goto(i);let h=i+s,o=i,l=i-e;for(;;){let e=t.to+l-n.to,i=e||t.endSide-n.endSide,s=i<0?t.to+l:n.to,a=Math.min(s,h);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&tE(t.activeForPoint(t.to),n.activeForPoint(n.to))||r.comparePoint(o,a,t.point,n.point):a>o&&!tE(t.active,n.active)&&r.compareRange(o,a,t.active,n.active),s>h)break;(e||t.openEnd!=n.openEnd)&&r.boundChange&&r.boundChange(s),o=s,i<=0&&t.next(),i>=0&&n.next()}}function tE(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function tP(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function tM(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function tO(t,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)0>(e[s]-i||t[s].endSide-t[n].endSide)&&(n=s,i=e[s]);return n}function tR(t,e,n,i){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=9==t.charCodeAt(i)?n-s%n:1,i=d(t,i)}return!0===i?-1:t.length}}}]);